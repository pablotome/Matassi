var preguntasVentas = [
   {
   	"ID": "1",
   	"TextoPregunta": "Pensando en su experiencia durante la última visita al taller, ¿ cuál es su grado de satisfacción general con el servicio prestado en Matassi e Imperiale ?",
   	"PosiblesRespuestas": [
	   {
	   	"TextoRespuesta": "Sumamente satisfecho"
	   },
	   {
	   	"TextoRespuesta": "Muy satisfecho"
	   },
	   {
	   	"TextoRespuesta": "Muy satisfecho"
	   },
	   {
	   	"TextoRespuesta": "Satisfecho"
	   },
	   {
	   	"TextoRespuesta": "Poco satisfecho"
	   },
	   {
	   	"TextoRespuesta": "Nada satisfecho"
	   },
	   {
	   	"TextoRespuesta": "No responde"
	   }
   	]
   },
   {
   	"ID": "2",
   	"TextoPregunta": "¿Recomendaría nuestro taller a parientes o amigos?",
   	"PosiblesRespuestas": [
	   {
	   	"TextoRespuesta": "Seguramente"
	   },
	   {
	   	"TextoRespuesta": "Probablemente sí"
	   },
	   {
	   	"TextoRespuesta": "Eventualmente"
	   },
	   {
	   	"TextoRespuesta": "Probablemente no"
	   },
	   {
	   	"TextoRespuesta": "Seguramente no"
	   },
	   {
	   	"TextoRespuesta": "No responde"
	   }
   	]
   },
   {
   	"ID": "3",
   	"TextoPregunta": "¿Llevaría nuevamente su auto a este mismo Taller para realizar una reparación o un servicio de mantenimiento?",
   	"PosiblesRespuestas": [
	   {
	   	"TextoRespuesta": "Seguramente"
	   },
	   {
	   	"TextoRespuesta": "Probablemente sí"
	   },
	   {
	   	"TextoRespuesta": "Eventualmente"
	   },
	   {
	   	"TextoRespuesta": "Probablemente no"
	   },
	   {
	   	"TextoRespuesta": "Seguramente no"
	   },
	   {
	   	"TextoRespuesta": "No responde"
	   }
   	]
   },
   {
   	"ID": "4",
   	"TextoPregunta": "Pensando en su última visita al taller: ¿cuál es su grado de satisfacción con las explicaciones de los trabajos antes de ser realizados?",
   	"PosiblesRespuestas": [
	   {
	   	"TextoRespuesta": "Sumamente satisfecho"
	   },
	   {
	   	"TextoRespuesta": "Muy satisfecho"
	   },
	   {
	   	"TextoRespuesta": "Satisfecho"
	   },
	   {
	   	"TextoRespuesta": "Poco satisfecho"
	   },
	   {
	   	"TextoRespuesta": "Nada satisfecho"
	   },
	   {
	   	"TextoRespuesta": "No responde"
	   }
   	]
   },
   {
   	"ID": "5",
   	"TextoPregunta": "¿Ha recibido algún consejo sobre los próximos servicios de mantenimiento y reparaciones de su vehículo?",
   	"PosiblesRespuestas": [
	   {
	   	"TextoRespuesta": "Si"
	   },
	   {
	   	"TextoRespuesta": "No"
	   }
   	]
   },
   {
   	"ID": "6",
   	"TextoPregunta": "¿Cuál es su grado de satisfacción en relación con la explicación de los trabajos realizados o de la factura?",
   	"PosiblesRespuestas": [
	   {
	   	"TextoRespuesta": "Sumamente satisfecho"
	   },
	   {
	   	"TextoRespuesta": "Muy satisfecho"
	   },
	   {
	   	"TextoRespuesta": "Satisfecho"
	   },
	   {
	   	"TextoRespuesta": "Poco satisfecho"
	   },
	   {
	   	"TextoRespuesta": "Nada satisfecho"
	   },
	   {
	   	"TextoRespuesta": "No responde"
	   }
   	]
   },
   {
   	"ID": "7",
   	"TextoPregunta": "¿Se cumplió con el plazo de entrega acordado?",
   	"PosiblesRespuestas": [
	   {
	   	"TextoRespuesta": "Si"
	   },
	   {
	   	"TextoRespuesta": "No"
	   }
   	]
   },
   {
   	"ID": "8",
   	"TextoPregunta": "La razón de su última visita al taller, ¿fue debido a que el taller hizo un trabajo incompleto o incorrecto en su visita anterior?",
   	"PosiblesRespuestas": [
	   {
	   	"TextoRespuesta": "Si"
	   },
	   {
	   	"TextoRespuesta": "No"
	   }
   	]
   },
   {
   	"ID": "9",
   	"TextoPregunta": "Grado de satisfacción con su taller - Amabilidad del personal",
   	"PosiblesRespuestas": [
	   {
	   	"TextoRespuesta": "Sumamente satisfecho"
	   },
	   {
	   	"TextoRespuesta": "Muy satisfecho"
	   },
	   {
	   	"TextoRespuesta": "Satisfecho"
	   },
	   {
	   	"TextoRespuesta": "Poco satisfecho"
	   },
	   {
	   	"TextoRespuesta": "Nada satisfecho"
	   },
	   {
	   	"TextoRespuesta": "No responde"
	   }
   	]
   },
   {
   	"ID": "10",
   	"TextoPregunta": "Grado de satisfacción con su taller - Asesoramiento técnico",
   	"PosiblesRespuestas": [
	   {
	   	"TextoRespuesta": "Sumamente satisfecho"
	   },
	   {
	   	"TextoRespuesta": "Muy satisfecho"
	   },
	   {
	   	"TextoRespuesta": "Satisfecho"
	   },
	   {
	   	"TextoRespuesta": "Poco satisfecho"
	   },
	   {
	   	"TextoRespuesta": "Nada satisfecho"
	   },
	   {
	   	"TextoRespuesta": "No responde"
	   }
   	]
   },
   {
   	"ID": "11",
   	"TextoPregunta": "Grado de satisfacción con su taller - Disposición del asesor para atender sus necesidades y deseos",
   	"PosiblesRespuestas": [
	   {
	   	"TextoRespuesta": "Sumamente satisfecho"
	   },
	   {
	   	"TextoRespuesta": "Muy satisfecho"
	   },
	   {
	   	"TextoRespuesta": "Satisfecho"
	   },
	   {
	   	"TextoRespuesta": "Poco satisfecho"
	   },
	   {
	   	"TextoRespuesta": "Nada satisfecho"
	   },
	   {
	   	"TextoRespuesta": "No responde"
	   }
   	]
   },
   {
   	"ID": "12",
   	"TextoPregunta": "Grado de satisfacción con su taller - Confianza que le transmitió el personal",
   	"PosiblesRespuestas": [
	   {
	   	"TextoRespuesta": "Sumamente satisfecho"
	   },
	   {
	   	"TextoRespuesta": "Muy satisfecho"
	   },
	   {
	   	"TextoRespuesta": "Satisfecho"
	   },
	   {
	   	"TextoRespuesta": "Poco satisfecho"
	   },
	   {
	   	"TextoRespuesta": "Nada satisfecho"
	   },
	   {
	   	"TextoRespuesta": "No responde"
	   }
   	]
   },
   {
   	"ID": "13",
   	"TextoPregunta": "Grado de satisfacción con su taller - Realización correcta de los trabajos de taller",
   	"PosiblesRespuestas": [
	   {
	   	"TextoRespuesta": "Sumamente satisfecho"
	   },
	   {
	   	"TextoRespuesta": "Muy satisfecho"
	   },
	   {
	   	"TextoRespuesta": "Satisfecho"
	   },
	   {
	   	"TextoRespuesta": "Poco satisfecho"
	   },
	   {
	   	"TextoRespuesta": "Nada satisfecho"
	   },
	   {
	   	"TextoRespuesta": "No responde"
	   }
   	]
   },
   {
   	"ID": "14",
   	"TextoPregunta": "Grado de satisfacción con su taller - Tiempo de espera cuando Ud. entrega el vehículo",
   	"PosiblesRespuestas": [
	   {
	   	"TextoRespuesta": "Sumamente satisfecho"
	   },
	   {
	   	"TextoRespuesta": "Muy satisfecho"
	   },
	   {
	   	"TextoRespuesta": "Satisfecho"
	   },
	   {
	   	"TextoRespuesta": "Poco satisfecho"
	   },
	   {
	   	"TextoRespuesta": "Nada satisfecho"
	   },
	   {
	   	"TextoRespuesta": "No responde"
	   }
   	]
   },
   {
   	"ID": "15",
   	"TextoPregunta": "Grado de satisfacción con su taller - Tiempo de espera cuando Ud. retira el vehículo",
   	"PosiblesRespuestas": [
	   {
	   	"TextoRespuesta": "Sumamente satisfecho"
	   },
	   {
	   	"TextoRespuesta": "Muy satisfecho"
	   },
	   {
	   	"TextoRespuesta": "Satisfecho"
	   },
	   {
	   	"TextoRespuesta": "Poco satisfecho"
	   },
	   {
	   	"TextoRespuesta": "Nada satisfecho"
	   },
	   {
	   	"TextoRespuesta": "No responde"
	   }
   	]
   },
   {
   	"ID": "16",
   	"TextoPregunta": "Grado de satisfacción con su taller - Limpieza con la que le fue entregado su vehículo",
   	"PosiblesRespuestas": [
	   {
	   	"TextoRespuesta": "Sumamente satisfecho"
	   },
	   {
	   	"TextoRespuesta": "Muy satisfecho"
	   },
	   {
	   	"TextoRespuesta": "Satisfecho"
	   },
	   {
	   	"TextoRespuesta": "Poco satisfecho"
	   },
	   {
	   	"TextoRespuesta": "Nada satisfecho"
	   },
	   {
	   	"TextoRespuesta": "No responde"
	   }
   	]
   },
   {
   	"ID": "17",
   	"TextoPregunta": "Grado de satisfacción con su taller - Apariencia del área de Servicio",
   	"PosiblesRespuestas": [
	   {
	   	"TextoRespuesta": "Sumamente satisfecho"
	   },
	   {
	   	"TextoRespuesta": "Muy satisfecho"
	   },
	   {
	   	"TextoRespuesta": "Satisfecho"
	   },
	   {
	   	"TextoRespuesta": "Poco satisfecho"
	   },
	   {
	   	"TextoRespuesta": "Nada satisfecho"
	   },
	   {
	   	"TextoRespuesta": "No responde"
	   }
   	]
   },
   {
   	"ID": "18",
   	"TextoPregunta": "Grado de satisfacción con su taller - Relación precio-prestaciones del trabajo realizado en el taller",
   	"PosiblesRespuestas": [
	   {
	   	"TextoRespuesta": "Sumamente satisfecho"
	   },
	   {
	   	"TextoRespuesta": "Muy satisfecho"
	   },
	   {
	   	"TextoRespuesta": "Satisfecho"
	   },
	   {
	   	"TextoRespuesta": "Poco satisfecho"
	   },
	   {
	   	"TextoRespuesta": "Nada satisfecho"
	   },
	   {
	   	"TextoRespuesta": "No responde"
	   }
   	]
   },
   {
   	"ID": "19",
   	"TextoPregunta": "¿El Taller del Concesionario lo contactó por algún medio para saber si estaba satisfecho con los trabajos realizados?",
   	"PosiblesRespuestas": [
	   {
	   	"TextoRespuesta": "Si"
	   },
	   {
	   	"TextoRespuesta": "No"
	   }
   	]
   },
   {
   	"ID": "20",
   	"TextoPregunta": "Suponiendo que nuevamente fuera a comprar un nuevo Volkswagen, ¿compraría su próximo auto en Matassi e Imperiale?",
   	"PosiblesRespuestas": [
	   {
	   	"TextoRespuesta": "Seguramente"
	   },
	   {
	   	"TextoRespuesta": "Probablemente sí"
	   },
	   {
	   	"TextoRespuesta": "Eventualmente"
	   },
	   {
	   	"TextoRespuesta": "Probablemente no"
	   },
	   {
	   	"TextoRespuesta": "Seguramente no"
	   },
	   {
	   	"TextoRespuesta": "No responde"
	   }
   	]
   }
];


$(document).ready(function () {
	var opcionesPregunta;

	for (preguntaVentas in preguntasVentas) {

		opcionesPregunta = '<div>';
		for (posibleRespuesta in preguntasVentas[preguntaVentas].PosiblesRespuestas) {
			opcionesPregunta += '<label><input id="Pregunta' + preguntasVentas[preguntaVentas].ID + '" name="Pregunta' + preguntasVentas[preguntaVentas].ID + '" type="radio" value="' + preguntasVentas[preguntaVentas].PosiblesRespuestas[posibleRespuesta].TextoRespuesta + '">' + preguntasVentas[preguntaVentas].PosiblesRespuestas[posibleRespuesta].TextoRespuesta + '</label>';
		}
		opcionesPregunta += '</div>';

		var tblPregunta = $('<div class="Imagenes1Columna"><div class="infoSoloTextoColumna"><h5>' + preguntasVentas[preguntaVentas].TextoPregunta + '</h5><p>' + $(opcionesPregunta).html() + '</p></div></div>');
		$('#divComentarios').before(tblPregunta);
	}

	$("#btnContestarEncuesta").click(function () {
		for (preguntaVentas in preguntasVentas) {
			if ($('input[name=Pregunta' + preguntasVentas[preguntaVentas].ID + ']:checked').val() === undefined) {
				alert('Debe contestar la pregunta "' + preguntasVentas[preguntaVentas].TextoPregunta + '"');
				return;
			}
		}

		var encuesta = "";

		for (preguntaVentas in preguntasVentas) {
			encuesta += '{"TextoPregunta":"' + preguntasVentas[preguntaVentas].TextoPregunta + '", "TextoRespuesta":"' + $('input[name=Pregunta' + preguntasVentas[preguntaVentas].ID + ']:checked').val() + '"}, ';
		}

		encuesta = '{"Preguntas":[' + encuesta.substring(0, encuesta.length - 2) + '], "Comentarios":"' + $('#txtComentarios').val() + '", "Nombre":"' + $('#txtNombre').val() + '", "Telefono":"' + $('#txtTelefono').val() + '", "EMail":"' + $('#txtEMail').val() + '"}';

		encuesta = JSON.parse(encuesta.replace(/\r?\n|\r/g, ''));


		/*$.getJSON("/API/Matassi/ResponderEncuestaVenta/" + grupo + "?ord=" + orden, function (result) {

			$("#divEmisiones").empty();

			for (var i = 0; i < result.length; i++) {

				var tblOferta = $('<table id="tblEmision"><tbody><tr class="Encabezado"><th	colspan="4">APELLIDO Y NOMBRE DEL CLIENTE: ' + result[i].Nombre + '</th></tr><tr><td><b>VENCIMIENTO:</b></td><td><b>' + result[i].Vencimiento + '</b></td><td colspan="2"></td></tr><tr><td>GRUPO:</td><td>' + result[i].Grupo + '</td><td>ALICUOTA:</td><td>$ ' + result[i].Alicuota + '</td></tr><tr><td>ORDEN:</td><td>' + result[i].Orden + '</td><td>CARGOS ADM.:</td><td>$ ' + result[i].CargosAdm + '</td></tr><tr><td>DESVIO:</td><td>' + result[i].Desvio + '</td><td>ACT.ALICUOTA:</td><td>$ ' + result[i].ActAlicuota + '</td></tr><tr><td>CUOTA NRO:</td><td>' + result[i].NroCuota + '</td><td>CARGOS ACT.ALIC.:</td><td>$ ' + result[i].CargosActAlic + '</td></tr><tr><td>SEG.BIEN:</td><td>$ ' + result[i].SegBien + '</td><td>SEG.VIDA:</td><td>$ ' + result[i].SegVida + '</td></tr><tr><td>CUOTAS PLAN:</td><td>' + result[i].CuotasPlan + '</td><td>MORA:</td><td>$ ' + result[i].Mora + '</td></tr><tr><td>MODELO PLAN:</td><td>' + result[i].Modelo + '</td><td>DEB/CRED:</td><td>$ ' + result[i].DebCred + '</td></tr><tr><td>BANCO:</td><td>' + result[i].Banco + '</td><td>INT.LIQUIDACION:</td><td>$ ' + result[i].IntLiq + '</td></tr><tr><td>SUCURSAL:</td><td>' + result[i].Sucursal + '</td><td>OTROS:</td><td>$ ' + result[i].Otros + '</td></tr><tr><td>CUENTA:</td><td>' + result[i].Cuenta + '</td><td><b>***** TOTAL:</b></td><td><b>$ ' + result[i].Total + '</b></td></tr></tbody></table>');
				$("#divEmisiones").append(tblOferta);
				$("#divEmisiones").append('<br/>');

			}
		});*/

		$.ajax({
			type: "POST",
			dataType: 'json',
			cache: false,
			data: JSON.stringify(encuesta),
			//data: { '': encuesta },
			url: "/API/Matassi/ResponderEncuestaPostVenta",
			contentType: "application/json",
			success: function (response) {
				alert('Gracias por contestar la encuesta!');
				window.open(window.location, '_self');
			},
			error: function (jqXHR, textStatus, errorThrown) {
				alert('Error - ' + errorThrown);
			}
		});

	});

});